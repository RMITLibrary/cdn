<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Untitled Document</title>
    <link href="./3d.css" type="text/css" rel="stylesheet">
    <style>
        body {
            width: 550px;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 13px;
            margin:0;
            padding:0;
        }

        h3 {
            text-transform: none;
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 1em;
            color: #D01B27;
        }

        p {
            line-height: 20px;
            width: 460px;
        }

        .card p {
            padding: 0 20px;
            display: table-cell;
            vertical-align: middle;
        }

        #answer1 {
            background-color: #f6a3b7;
        }

        #answer2 {
            background-color: #c2d895;
        }

        .redHighlight {
            background-color: #ec416c;
            color: white;
        }

        .greenHighlight {
            background-color: #7dac21;
            color: white;
        }
        .greenHighlight2 {
            background-color: #C3C21C;
            color: white;
        }
        .greenHighlight3 {
            background-color: #78C21D;
            color: white;
        }

        span {
            border-radius: 2px;
            padding: 2px 2px;
            cursor: default;
        }

        .ui-tooltip {
            padding: 3px 10px;
            color: #555;
            border-radius: 5px;
            font: 13px "Helvetica Neue", Sans-Serif;
            box-shadow: 0 0 7px black;
            width: 90px;
            text-align: center;
            background: white;
            border: 2px solid white;
        }
    </style>
    <!--<script src="./jquery.js"></script>-->
    <!--<script src="./jquery-ui.min.js"></script>-->
    <!--<script src="./jquery.transit.min.js"></script>   -->
    <script src="jquery.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="jquery.transit.min.js"></script>
</head>

<body>
<!--<div id="debug" style="width:80px; height:50px; background-color: red"></div>-->
<div id="paragraph">
    <h3>Original text</h3>

    <p id="origin">The United States, Germany and Japan and other industrial nations are being transformed from
        industrial economies to knowledge and information based service economies, whilst manufacturing has been moving
        to low wage countries. In a knowledge and information based economy, knowledge and information are the key
        ingredients in creating wealth.
        From: Laudon & Laudon (2000), Management information systems: managing the digital firm, p 31.</p>

    <p id="paraphrase1_origin" class="hide">The United States, Germany and Japan and other industrial nations are
        being<span answer="paraphrase1_0">transformed</span> from industrial economies to knowledge and information
        based service economies, whilst manufacturing <span answer="paraphrase1_1">has been moving</span> to <span
                answer="paraphrase1_2">low wage countries</span>. In a knowledge and information based economy,
        knowledge and information are the <span answer="paraphrase1_3">key ingredients in creating wealth</span>.
        From: Laudon & Laudon (2000), Management information systems: managing the digital firm, p 31.</p>

    <p id="paraphrase2_origin" class="hide" style="white-space:wrap;"><span answer="paraphrase2_1">The United States, Germany and Japan and other industrial nations are being transformed from industrial economies to knowledge and information based service economies</span>,
        <span answer="paraphrase2_0">whilst manufacturing has been moving to low wage countries</span>. <span
                answer="paraphrase2_2">In a knowledge and information based economy, knowledge and information are the key ingredients in creating wealth</span>.
        From: Laudon & Laudon (2000), Management information systems: managing the digital firm, p 31.</p>
</div>
<div id="paraphrase1" style="float: left">
    <h3>Paraphrase 1</h3>

    <div class="container_3d" style="display: inline-block; float: left; margin-left: 10px">
        <div class=" card" id="card1">
            <div class="front face shadow">
                <p>The United States, Germany, Japan and other economies are being dramatically changed from industrial
                    economies to knowledge and information based service economies as manufacturing shifts to countries
                    where the wages are low cost. In knowledge and information economies, knowledge and information are
                    the focus in economic growth (Laudon & Laudon, 2000).</p>
            </div>
            <div id="answer1" class="back face shadow">
                <p>The United States, Germany, Japan and other economies are being <span answer="paraphrase1_0">dramatically changed</span>
                    from industrial economies to knowledge and information based service economies as manufacturing
                    <span answer="paraphrase1_1">shifts</span> to countries <span answer="paraphrase1_2">where the wages are low cost</span>.
                    In knowledge and information economies, knowledge and information are the <span
                            answer="paraphrase1_3">focus in economic growth</span> (Laudon & Laudon, 2000).</p>
            </div>
        </div>
    </div>
    <div id="cross" class="hide" style="display: inline-block; float: left; margin: 90px 0 0 20px"><img src="cross.png">
    </div>
    <p id="paraphrase1_fbk" class="hide" style="color:#ec416c;  float: left; font-weight: bold;margin-left: 10px">Some <span id="replay1"
                                                                                        class="redHighlight"
                                                                                        title="Click to replay">keywords</span>
        have
        been changed but the sentence structure has not been changed. Paraphrase 1 is too similar to the original text
    </p>
</div>
<div id="paraphrase2" style="float: left">
    <h3>Paraphrase 2</h3>

    <div class="container_3d" style="display: inline-block; float: left;margin-left: 10px">
        <div class=" card">
            <div class="front face shadow">
                <p>As manufacturing has moved to economies where wages are low, developed countries such as the United
                    States, Germany and Japan have had to turn to knowledge and information-based services to drive
                    economic growth (Laudon & Laudon, 2000).</p>
            </div>
            <div id="answer2" class="back face center shadow">
                <p><span
                        answer="paraphrase2_0">As manufacturing has moved to economies where wages are low</span>, <span
                        answer="paraphrase2_1">developed countries such as the United States, Germany and Japan</span>
                    have had to turn to <span answer="paraphrase2_2">knowledge and information-based services to drive economic growth</span>
                    (Laudon & Laudon, 2000).</p>

            </div>
        </div>
    </div>
    <div id="tick" class="hide" style="display: inline-block; float: left; margin: 90px 0 0 20px"><img src="tick.png">
    </div>
    <p id="paraphrase2_fbk" class="hide" style="color:#7dac21; float: left; font-weight: bold;margin-left: 10px">This is the better paraphrase. The
        <span id="replay2" class="greenHighlight">keywords and the sentence structure</span> have been changed.
    </p>
</div>
<script>
    $(".hide").hide();

    //trigger flip
    $(".container_3d").click(function () {
        unbindHoverForWords();
        var context = $(this).parent().attr('id');
        $("#" + context + "_fbk").show();
        console.log("context: " + context)
        buildHover(context)
        reset(context)
        $("#origin").hide();
        $("#" + context + "_origin").show();

        if (detectIE()) {
//            console.log("this is IE");
            $(this).children(".card").transition({
                perspective: '1000px',
                rotateY: '89.9deg',
                duration: 500
            }, function () {
                $(this).children(".back").css("transform", "rotateY(0deg)")
            }).transition({
                perspective: '1000px',
                rotateY: '0deg',
                duration: 500
            }, function () {
                highlight(context);
                setTimeout(function () {
                    bindHoverForWords()
                }, 1000 * 5)
            })

        }
        else {

            $(this).children(".card").transition({
                perspective: '1000px',
                rotateY: '180deg',
                duration: 500
            }, function () {
                highlight(context);
                setTimeout(function () {
                    bindHoverForWords()
                }, 1000 * 5)
            })
        }


        if (context == "paraphrase1") {
            $("#cross").show();
            $("#tick").hide();
        } else {
            $("#tick").show();
            $("#cross").hide();
        }

    })

    //build hover effect for the card
    function buildHover(context) {
        var another = "";
        if (context == "paraphrase1") {
            another = "paraphrase2"
        } else {
            another = "paraphrase1"
        }
        $("#" + another).children(".container_3d").mouseenter(function () {
            $(this).children(".card").transition({
                perspective: '1000px',
                rotateY: '-20deg',
                duration: 500
            })
        });
        $("#" + another).children(".container_3d").mouseleave(function () {
            $(this).children(".card").transition({
                perspective: '1000px',
                rotateY: '0deg',
                duration: 500
            })
        });
        $("#" + context).children(".container_3d").unbind('mouseenter mouseleave')
    }


    //highlight corresponding parts
    function bindHoverForWords() {
        $("span").mouseenter(function () {
            var id = $(this).attr("answer");
            console.log($("[answer=id]"))
            $('[answer=' + id + ']').animate({opacity: .5})
        });
        $("span").mouseleave(function () {
            var id = $(this).attr("answer");
            console.log($("[answer=id]"))
            $('[answer=' + id + ']').animate({opacity: 1})
        });
    }
    function unbindHoverForWords() {
        $("span").unbind('mouseenter mouseleave');
    }


    //for reset to initial state when flip back
    function reset(context) {
        var another = "";
        if (context == "paraphrase1") {
            another = "paraphrase2"
        } else {
            another = "paraphrase1"
        }
        console.log("another: " + another)
        dehighlight(another)
        $("#" + another + "_fbk").hide();
        if (detectIE()) {
//            $("#" + another).children(".container_3d").children().transition({
//                perspective: '1000px',
//                rotateY: '0deg',
//                duration: 0
//            },function(){
            $("#" + another).children(".container_3d").children().fadeOut(400,function(){
                $("#" + another).children(".container_3d").children().children(".back").css("transform", "rotateY(180deg)")
                $("#" + another).children(".container_3d").children().css("transform", "rotateY(0deg)")
            })
            $("#" + another).children(".container_3d").children().fadeIn()

//            $("#" + another).children(".container_3d").children().fadeIn("slow")
//                $(this).children(".back").css("transform", "rotateY(180deg)")
//                $(this).fadeIn("slow")
//            }).transition({
//                perspective: '1000px',
//                rotateY: '0deg'
//            });
        } else {
            $("#" + another).children(".container_3d").children().transition({
            perspective: '1000px',
            rotateY: '0deg',
                duration: 250
            });
        }
        $("#origin").show();
        $("#" + another + "_origin").hide();
    }

    //highlight & dehighlight
    function highlight(context) {
        for (var i = 0; i < 5; i++) {
            var id = "[answer=" + context + "_" + i + "]";
            if (context == "paraphrase1")
                $(id).delay(1500 * i + 1000).addClass("redHighlight", 400)
            else {
                if(i==0)
                $(id).delay(1500 * i + 1000).addClass("greenHighlight", 400)
                if(i==1)
                    $(id).delay(1500 * i + 1000).addClass("greenHighlight2", 400)
                if(i==2)
                    $(id).delay(1500 * i + 1000).addClass("greenHighlight3", 400)
            }
        }

    }
    function dehighlight(context) {
        var id = "[answer^=" + context + "]";
        if (context == "paraphrase2")

            $("span[answer]").stop().removeClass("redHighlight")
        else
            $("span[answer]").stop().removeClass("greenHighlight")
        $("span[answer]").stop().removeClass("greenHighlight2")
        $("span[answer]").stop().removeClass("greenHighlight3")
    }

    //replay
//    $("#replay1").click(function () {
//        dehighlight("paraphrase1");
//        highlight("paraphrase1")
//    }).css("cursor", "pointer");
//    $("#replay2").click(function () {
//        dehighlight("paraphrase2");
//        highlight("paraphrase2")
//    }).css("cursor", "pointer");


    //detect IE
    function detectIE() {
        var ua = window.navigator.userAgent;
        var msie = ua.indexOf('MSIE ');
        var trident = ua.indexOf('Trident/');

        if (msie > 0) {
            // IE 10 or older => return version number
            return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);
        }

        if (trident > 0) {
            // IE 11 (or newer) => return version number
            var rv = ua.indexOf('rv:');
            return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);
        }

        // other browser
        return false;
    }

</script>
</body>
</html>
